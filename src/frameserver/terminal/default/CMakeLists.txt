SET(TUI_BASE
	${CMAKE_CURRENT_SOURCE_DIR}/../../../shmif/tui)

SET(TERMINAL_SOURCES
	${CMAKE_CURRENT_SOURCE_DIR}/tsm/shl-pty.c
	${CMAKE_CURRENT_SOURCE_DIR}/tsm/shl-ring.c
	${CMAKE_CURRENT_SOURCE_DIR}/tsm/tsm_vte.c
	${CMAKE_CURRENT_SOURCE_DIR}/tsm/tsm_vte_charsets.c
	${CMAKE_CURRENT_SOURCE_DIR}/arcterm.c
	${CMAKE_CURRENT_SOURCE_DIR}/cli.c
	${CMAKE_CURRENT_SOURCE_DIR}/cli_parse.c
	${CMAKE_CURRENT_SOURCE_DIR}/cli_builtin.c
	${CMAKE_CURRENT_SOURCE_DIR}/cli_lua.c
	${TUI_BASE}/lua/tui_lua.c
	${TUI_BASE}/lua/nbio.c
	${TUI_BASE}/lua/tui_popen.c
	PARENT_SCOPE
)

if (NOT LUA_LIBRARY)
	find_package(Lua51 REQUIRED)
endif()

if (FSRV_TERMINAL_NOEXEC)
	SET(TERMINAL_DEFS
	FSRV_TERMINAL_NOEXEC
	PARENT_SCOPE
	)
endif()

SET(TERMINAL_LIBS
	util
	arcan_tui
	${LUA_LIBRARIES}
	PARENT_SCOPE
)

set(TERMINAL_INCLUDE_DIRS
	${CMAKE_CURRENT_SOURCE_DIR}/tsm
	${LUA_INCLUDE_DIR}
	${TUI_BASE}/lua
	PARENT_SCOPE
)
